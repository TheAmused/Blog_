<div class="container fade-in pb-5">
  
  <div class="text-center mb-5 mt-4">
    <div class="d-inline-flex align-items-center justify-content-center bg-primary-subtle text-primary rounded-circle mb-3 shadow-sm" style="width: 60px; height: 60px;">
      <i class="bi bi-camera-fill fs-3"></i>
    </div>
    <h1 class="fw-bold display-6">Galeria Zdjęć</h1>
    <p class="text-secondary lead">Przeglądaj wszystkie zdjęcia dodane do artykułów</p>
  </div>

  <div class="d-flex justify-content-end mb-4">
    <div class="limit-selector shadow-sm">
      <span class="label">Na stronę:</span>
      <select [value]="itemsPerPage" (change)="onLimitChange($event)">
        @for (limit of limitOptions; track limit) {
          <option [value]="limit">{{ limit }}</option>
        }
      </select>
    </div>
  </div>

  <div class="gallery-grid mb-5">
    @for (item of posts; track item._id) {
      @if (item.image) {
        <div class="gallery-item" (click)="openImage(item.image)">
          <img [src]="item.image" alt="Zdjęcie" loading="lazy">
          <div class="overlay">
            <i class="bi bi-arrows-angle-expand fs-2 text-white"></i>
          </div>
        </div>
      }
    }
    @empty {
      <div class="col-12 text-center text-muted py-5">
        Brak zdjęć w galerii.
      </div>
    }
  </div>

  @if (totalItems > itemsPerPage) {
    <div class="d-flex justify-content-center">
      <app-pagination 
        [totalItems]="totalItems" 
        [itemsPerPage]="itemsPerPage" 
        [currentPage]="currentPage" 
        (pageChange)="onPageChange($event)">
      </app-pagination>
    </div>
  }

  @if (selectedImage) {
    <div class="lightbox" (click)="closeImage()">
      <button class="close-btn"><i class="bi bi-x-lg"></i></button>
      <img [src]="selectedImage" alt="Pełny ekran" (click)="$event.stopPropagation()">
    </div>
  }

</div>